#! /usr/bin/perl -w
################################################################################
#
# 2_new.t (Test calling new as a method)
#
################################################################################
#
# Includes
#
################################################################################
use strict;
use Test;
################################################################################
#
# Setup
#
################################################################################
BEGIN {
	plan test => 5
} use PML;
################################################################################
#
# Start
#
################################################################################
my ($parser, @code);

eval {require Storable};
skip($@, 1);

$parser = new PML;
@code = <DATA>;
$parser->parse(\@code); ok(1);
$parser = $parser->new;
ok($parser);
$parser->execute;
ok($parser->v('test') == 15);
$parser = $parser->new;
ok($parser->v('test') == 15);
################################################################################
#                              END-OF-SCRIPT                                   #
################################################################################
__END__
#
# This is PML for Testing
#
@set(test, 15)
